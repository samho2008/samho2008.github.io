(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{1125:function(s,a,t){s.exports=t.p+"assets/img/image-20220419071242748.93bb6f78.png"},1126:function(s,a,t){s.exports=t.p+"assets/img/image-20220419071929785.706425e6.png"},2053:function(s,a,t){"use strict";t.r(a);var n=t(34),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"安装-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx"}},[s._v("#")]),s._v(" 安装 Nginx")]),s._v(" "),n("p",[s._v("Nginx 所有版本下载："),n("a",{attrs:{href:"http://nginx.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/download/"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"windows-系统上安装-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#windows-系统上安装-nginx"}},[s._v("#")]),s._v(" Windows 系统上安装 Nginx")]),s._v(" "),n("h2",{attrs:{id:"linux-系统上安装-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux-系统上安装-nginx"}},[s._v("#")]),s._v(" Linux 系统上安装 Nginx")]),s._v(" "),n("h3",{attrs:{id:"nginx-安装方式一-推荐-从官网下载安装包编译安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装方式一-推荐-从官网下载安装包编译安装"}},[s._v("#")]),s._v(" Nginx 安装方式一（推荐）：从官网下载安装包编译安装")]),s._v(" "),n("h4",{attrs:{id:"linux-一键编译安装-nginx-脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux-一键编译安装-nginx-脚本"}},[s._v("#")]),s._v(" Linux 一键编译安装 Nginx 脚本")]),s._v(" "),n("blockquote",[n("p",[s._v("Nginx 所有版本下载："),n("a",{attrs:{href:"http://nginx.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/download/"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("Nginx 生产环境使用版本：")]),s._v(" "),n("p",[s._v("Redis 官方下载站版本 1.18.0："),n("a",{attrs:{href:"https://download.redis.io/releases/404",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://download.redis.io/releases/404"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("Nginx 官方下载站版本 1.21.5："),n("a",{attrs:{href:"http://nginx.org/download/404",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/download/404"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("达内慕课网版本 1.20.1："),n("a",{attrs:{href:"https://www.tmooc.cn/404",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.tmooc.cn/404"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("达内资源下载站版本 1.4.3："),n("a",{attrs:{href:"http://code.tarena.com.cn/404",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://code.tarena.com.cn/404"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载 Nginx 安装包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署时从 http://nginx.org/en/download.html 获取最新的 mainline 版本号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nginx_version")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.21")]),s._v(".6\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -P /usr/local/src http://nginx.org/download/nginx-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${nginx_version}")]),s._v(".tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压 Nginx 安装包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/src\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf ./nginx-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${nginx_version}")]),s._v(".tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装编译 Nginx 所需要的依赖")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${nginx_version}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x configure\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译 Nginx")]),s._v("\n./configure\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 环境变量中配置 Nginx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export NGINX_HOME=/usr/local/nginx'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export PATH=$NGINX_HOME/sbin:$PATH'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Nginx")]),s._v("\nnginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果看到网页输出说明 Nginx 安装成功")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:80\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许外网访问 80 端口")]),s._v("\nfirewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent\nfirewall-cmd --reload\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 Nginx 开机自启")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/local/nginx/sbin/nginx'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/rc.local\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /etc/rc.d/rc.local\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 隐藏 Nginx 版本号")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/http {/a\\    server_tokens off;'")]),s._v(" /usr/local/nginx/conf/nginx.conf\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改完配置后需要重启才能生效")]),s._v("\n/usr/local/nginx/sbin/nginx -s reload\n\n")])])]),n("h4",{attrs:{id:"下载-nginx-安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下载-nginx-安装包"}},[s._v("#")]),s._v(" 下载 Nginx 安装包")]),s._v(" "),n("p",[s._v("打开  Nginx 官网："),n("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://nginx.org/en/download.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("然后点击 nginx-1.21.6 会自动跳转下载。")]),s._v(" "),n("p",[n("img",{attrs:{src:t(1125),alt:"image-20220419071242748"}})]),s._v(" "),n("blockquote",[n("p",[s._v("尽管 Stable version 是稳定版本，但是在生产服务器上部署的时候建议还是使用最新的 Mainline version，因为所谓的稳定版本只是说修复了一些以前特性的 bug，但是其实并不包含新的一些特性，并且新版本也是基于稳定版本去修改而来的。而且 Nginx 官网也推荐使用 Mainline Version。")]),s._v(" "),n("p",[s._v("具体查看："),n("a",{attrs:{href:"https://serverfault.com/questions/715049/what-s-the-difference-between-the-mainline-and-stable-branches-of-nginx",target:"_blank",rel:"noopener noreferrer"}},[s._v('What\'s the difference between the "mainline" and "stable" branches of nginx?'),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("如果是在本地下载的，在下载完成后还需要上传到服务器上，上传至目录 /usr/local/src")]),s._v(" "),n("p",[s._v("（推荐）如果服务器可以访问外网，也可以直接在服务器上下载，右键需要下载的版本，然后点击复制链接地址：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(1126),alt:"image-20220419071929785"}})]),s._v(" "),n("p",[s._v("在服务器上执行，使用 wget 命令下载至 /usr/local/src")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -P /usr/local/src http://nginx.org/download/nginx-1.21.6.tar.gz\n")])])]),n("blockquote",[n("p",[s._v("如果提示 "),n("code",[s._v("-bash: wget: 未找到命令")]),s._v("，需要先执行下面语句安装 wget 命令：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n")])])])]),s._v(" "),n("h4",{attrs:{id:"解压-nginx-压缩包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解压-nginx-压缩包"}},[s._v("#")]),s._v(" 解压 Nginx 压缩包")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/src\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf ./nginx-1.21.6.tar.gz\n")])])]),n("h4",{attrs:{id:"安装-nginx-编译所需要的依赖项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx-编译所需要的依赖项"}},[s._v("#")]),s._v(" 安装 Nginx 编译所需要的依赖项")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n")])])]),n("blockquote",[n("p",[s._v("依赖说明：")]),s._v(" "),n("p",[s._v("gcc：gcc 是 Linux 下的编译器，它可以编译 C，C++，Ada，Object C 和 Java 等语言。")]),s._v(" "),n("p",[s._v("pcre：pcre 是一个 perl 库，包括 perl 兼容的正则表达式库，Nginx 的 http 重写模块使用 pcre 来解析正则表达式，所以需要安装 pcre 库。")]),s._v(" "),n("p",[s._v("zlib：zlib 库提供了很多种压缩和解压缩方式 Nginx 使用 zlib 对 http 包的内容进行 gzip，所以需要安装。")]),s._v(" "),n("p",[s._v("openssl：openssl 是 web 安全通信的基石，没有 openssl，可以说我们的信息都是在裸奔。")])]),s._v(" "),n("h4",{attrs:{id:"编译安装-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编译安装-nginx"}},[s._v("#")]),s._v(" 编译安装 Nginx")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.21.6\n./configure\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),n("blockquote",[n("p",[s._v("如果 "),n("code",[s._v("./configure")]),s._v(" 报错没有权限，则执行以下命令：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x configure\n")])])]),n("p",[s._v("如果出现以下错误，说明没有安装好 gcc 依赖项，[安装 Nginx 编译所需要的依赖项](#安装 Nginx 编译所需要的依赖项)")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost nginx-1.21.6"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./configure ")]),s._v("\nchecking "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" OS\n + Linux "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-862.el7.x86_64 x86_64\nchecking "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" C compiler "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". not found\n\n./configure: error: C compiler cc is not found\n")])])]),n("p",[s._v("如果出现以下错误，说明没有安装好 pcre 依赖项，[安装 Nginx 编译所需要的依赖项](#安装 Nginx 编译所需要的依赖项)")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("./configure: error: the HTTP rewrite module requires the PCRE library.\nYou can either disable the module by using --without-http_rewrite_module\noption, or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" the PCRE library into the system, or build the PCRE library\nstatically from the "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" with nginx by using --with-pcre"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" option.\n")])])]),n("p",[s._v("如果出现以下错误，说明没有安装好 zlib 依赖项，[安装 Nginx 编译所需要的依赖项](#安装 Nginx 编译所需要的依赖项)")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("./configure: error: the HTTP "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" module requires the zlib library.\nYou can either disable the module by using --without-http_gzip_module\noption, or "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" the zlib library into the system, or build the zlib library\nstatically from the "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" with nginx by using --with-zlib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" option.\n")])])])]),s._v(" "),n("h4",{attrs:{id:"查找-nginx-的安装位置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查找-nginx-的安装位置"}},[s._v("#")]),s._v(" 查找 Nginx 的安装位置")]),s._v(" "),n("p",[s._v("默认情况下，会安装到 /usr/local/nginx 下，也可以通过命令查找安装位置：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" nginx\n")])])]),n("h4",{attrs:{id:"启动-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动-nginx"}},[s._v("#")]),s._v(" 启动 Nginx")]),s._v(" "),n("p",[s._v("执行以下命令：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("/usr/local/nginx/sbin/nginx\n")])])]),n("blockquote",[n("p",[s._v("如果出现以下错误，说明 80 端口被占用了，或者 Nginx 已经启动过了：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/nginx/sbin/nginx")]),s._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80 failed "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(": Address already "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80 failed "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(": Address already "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80 failed "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(": Address already "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80 failed "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(": Address already "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80 failed "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(": Address already "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("emerg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" still could not bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),n("p",[s._v("停止 Nginx，并重新启动：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("/usr/local/nginx/sbin/nginx -s stop\n/usr/local/nginx/sbin/nginx\n")])])]),n("p",[s._v("如果依然无法正常启动，使用以下命令找到占用 80 端口的进程然后 kill 掉。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -anop "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -w "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])])]),n("p",[s._v("如果出现 "),n("code",[s._v("-bash: netstat: 未找到命令")]),s._v("，则需要先执行以下命令安装 "),n("code",[s._v("net-tools")]),s._v(" 依赖")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" net-tools\n")])])])]),s._v(" "),n("h4",{attrs:{id:"访问-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#访问-nginx"}},[s._v("#")]),s._v(" 访问 Nginx")]),s._v(" "),n("h5",{attrs:{id:"从服务器里访问-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#从服务器里访问-nginx"}},[s._v("#")]),s._v(" 从服务器里访问 Nginx")]),s._v(" "),n("p",[s._v("在服务器中执行以下命令：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:80\n")])])]),n("p",[s._v("如果看到以下提示，说明 Nginx 服务已经启动起来，并且可以正常使用了。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 127.0.0.1:80")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("DOCTYPE html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("head"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("title"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Welcome to nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/title"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("style"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nhtml "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" color-scheme: light dark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nbody "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" width: 35em"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" margin: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nfont-family: Tahoma, Verdana, Arial, sans-serif"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/style"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/head"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("Welcome to nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/h"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required."),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("For online documentation and support please refer to\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://nginx.org/"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("nginx.org"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("."),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("br/"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nCommercial support is available at\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://nginx.com/"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("nginx.com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("."),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("em"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Thank you "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" using nginx."),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/em"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/p"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/body"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),n("h5",{attrs:{id:"从外网访问-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#从外网访问-nginx"}},[s._v("#")]),s._v(" 从外网访问 Nginx")]),s._v(" "),n("p",[s._v("在主机用浏览器打开以下网址，把 192.168.202.221 换成对应的 IP 地址。")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("http://192.168.202.221:80\n")])])]),n("blockquote",[n("p",[s._v("如果无法访问，检查服务器是否开启了防火墙。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl status firewalld\n")])])]),n("p",[s._v("看到绿色的小圆点或者看到提示 "),n("code",[s._v("Active: active (running)")]),s._v("，说明防火墙正在开启，执行以下命令关闭防火墙，并永久生效")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl stop firewalld\nsystemctl disable firewalld\n")])])]),n("p",[s._v("注意！！！直接关闭防火墙非常不安全，建议只开放需要的 80 端口。")]),s._v(" "),n("p",[s._v("执行以下命令开放 80 端口（执行后出现 success 说明执行成功）。")]),s._v(" "),n("p",[s._v("添加完成后，还需要重新加载防火墙才能成功，否则只有在下次重新启动防火墙的时候才会生效！")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("firewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent\nfirewall-cmd --reload\n")])])])]),s._v(" "),n("h4",{attrs:{id:"隐藏-nginx-版本号"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#隐藏-nginx-版本号"}},[s._v("#")]),s._v(" 隐藏 Nginx 版本号")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/http {/a\\    server_tokens off;'")]),s._v(" /usr/local/nginx/conf/nginx.conf\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改完配置后需要重启才能生效")]),s._v("\n/usr/local/nginx/sbin/nginx -s reload\n")])])]),n("h4",{attrs:{id:"添加-nginx-至环境变量-可选"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加-nginx-至环境变量-可选"}},[s._v("#")]),s._v(" 添加 Nginx 至环境变量（可选）")]),s._v(" "),n("p",[s._v("把 Nginx 添加到环境变量后可以在系统的任意路径下执行 nginx 的命令。")]),s._v(" "),n("h5",{attrs:{id:"方式一-推荐-使用-echo-命令追加到-etc-profile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方式一-推荐-使用-echo-命令追加到-etc-profile"}},[s._v("#")]),s._v(" 方式一（推荐）：使用 echo 命令追加到 /etc/profile")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export NGINX_HOME=/usr/local/nginx'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export PATH=$NGINX_HOME/sbin:$PATH'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/profile\n")])])]),n("p",[s._v("执行以下命令，使环境变量生效")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])])]),n("h5",{attrs:{id:"方式二-手动修改-etc-profile"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方式二-手动修改-etc-profile"}},[s._v("#")]),s._v(" 方式二：手动修改 /etc/profile")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入大写的 G 或者按 Shift + g 跳到最后一行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在最后添加以下内容")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NGINX_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NGINX_HOME")]),s._v("/sbin:"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改完成后，输入 :wq 保存并退出")]),s._v("\n")])])]),n("p",[s._v("执行以下命令，使环境变量生效。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n")])])]),n("p",[s._v("执行完成以后，就可以在任意目录下直接使用 Nginx 命令了。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~\nnginx\n")])])]),n("h4",{attrs:{id:"设置-nginx-开机自动启动-可选"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置-nginx-开机自动启动-可选"}},[s._v("#")]),s._v(" 设置 Nginx 开机自动启动（可选）")]),s._v(" "),n("h5",{attrs:{id:"方式一-使用-rc-local-设置-nginx-开机自启"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方式一-使用-rc-local-设置-nginx-开机自启"}},[s._v("#")]),s._v(" 方式一：使用 rc.local 设置 Nginx 开机自启")]),s._v(" "),n("p",[s._v("默认情况下，Nginx 的安装目录是 /usr/local/nginx，否则需要替换成 Nginx 二进制文件具体所在的路径。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/local/nginx/sbin/nginx'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/rc.local\n")])])]),n("p",[s._v("设置执行权限，确保脚本会在开机的时候会执行。")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /etc/rc.d/rc.local\n")])])]),n("h5",{attrs:{id:"方式二-centos-7-官方推荐的方式-使用-systemd-设置-nginx-开机自启"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方式二-centos-7-官方推荐的方式-使用-systemd-设置-nginx-开机自启"}},[s._v("#")]),s._v(" 方式二：（CentOS 7 官方推荐的方式）使用 systemd 设置 Nginx 开机自启")]),s._v(" "),n("p",[s._v("注意！！！从 CentOS 7 开始，才有 systemd 这个服务，这个服务的出现是为了解决以前 sysinit 的一些缺点。")]),s._v(" "),n("p",[s._v("但是我个人觉得，如果只是想达到开机自动启动的目的，使用 rc.local 反而更加方便。")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("创建 nginx.service")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /lib/systemd/system/nginx.service\n")])])]),n("p",[s._v("添加以下内容：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("After")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecReload")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx -s reload\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStop")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx -s quit\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])]),n("blockquote",[n("p",[s._v("解释：")]),s._v(" "),n("p",[s._v("Description：描述服务\nAfter：描述服务类别\n[Service]服务运行参数的设置\nType=forking是后台运行的形式\nExecStart为服务的具体运行命令\nExecReload为重启命令\nExecStop为停止命令\nPrivateTmp=True表示给服务分配独立的临时空间\n注意：[Service]的启动、重启、停止命令全部要求使用绝对路径\n[Install]运行级别下服务安装的相关设置，可设置为多用户，即系统运行级别为3")])]),s._v(" "),n("p",[s._v("然后 "),n("code",[s._v(":wq")]),s._v(" 保存并退出。")]),s._v(" "),n("p",[s._v("这个时候，就可以用 systemctl 来直接管理 nginx 了。")]),s._v(" "),n("p",[s._v("设置 Nginx 开机自启：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),n("blockquote",[n("p",[s._v("用 systemctl 管理 Nginx 服务的其他命令：")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Nginx 服务")]),s._v("\nsystemctl start nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动 Nginx 服务")]),s._v("\nsystemctl restart nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止 Nginx 服务")]),s._v("\nsystemctl stop nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新加载 Nginx 的配置文件，类似于重启，但服务不会停止")]),s._v("\nsystemctl reload nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机自启动")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止开机自启动")]),s._v("\nsystemctl disable nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务当前状态")]),s._v("\nsystemctl status nginx.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有已启动的服务")]),s._v("\nsystemctl list-units --type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service\n")])])])]),s._v(" "),n("h4",{attrs:{id:"添加使用-gzip-压缩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加使用-gzip-压缩"}},[s._v("#")]),s._v(" 添加使用 gzip 压缩")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" sbin/\n./nginx -s reload\n./nginx -V\n./configure --with-http_gzip_static_module\n./nginx -s reload\n")])])]),n("h3",{attrs:{id:"nginx-安装方式二-通过-yum-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装方式二-通过-yum-安装"}},[s._v("#")]),s._v(" Nginx 安装方式二：通过 yum 安装")]),s._v(" "),n("p",[s._v("这种方式安装方便，管理也很方便（可以通过 systemctl 直接管理），适合新手。")]),s._v(" "),n("p",[s._v("但是，这种方式安装的文件目录不集中，分散到系统的多个目录中。而且 yum 上的版本可能不是最新的，并且也不好指定某个版本去下载。")]),s._v(" "),n("h4",{attrs:{id:"添加-nginx-的-yum-源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#添加-nginx-的-yum-源"}},[s._v("#")]),s._v(" 添加 Nginx 的 yum 源")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n")])])]),n("h4",{attrs:{id:"安装-nginx-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx-2"}},[s._v("#")]),s._v(" 安装 Nginx")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nginx\n")])])]),n("h4",{attrs:{id:"启动-nginx-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动-nginx-2"}},[s._v("#")]),s._v(" 启动 Nginx")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start nginx.service\n")])])]),n("h4",{attrs:{id:"开机自动启动-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开机自动启动-nginx"}},[s._v("#")]),s._v(" 开机自动启动 Nginx")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),n("h4",{attrs:{id:"通过-yum-安装的-nginx-的配置存放目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过-yum-安装的-nginx-的配置存放目录"}},[s._v("#")]),s._v(" 通过 yum 安装的 nginx 的配置存放目录")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("网站文件存放默认目录："),n("code",[s._v("/usr/share/nginx/html")])])]),s._v(" "),n("li",[n("p",[s._v("网站默认站点配置："),n("code",[s._v("/etc/nginx/conf.d/default.conf")])])]),s._v(" "),n("li",[n("p",[s._v("自定义Nginx站点配置文件存放目录："),n("code",[s._v("/etc/nginx/conf.d/")])])]),s._v(" "),n("li",[n("p",[s._v("Nginx全局配置："),n("code",[s._v("/etc/nginx/nginx.conf")])])]),s._v(" "),n("li",[n("p",[s._v("Nginx启动："),n("code",[s._v("nginx -c nginx.conf")])])])]),s._v(" "),n("h4",{attrs:{id:"访问-nginx-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#访问-nginx-2"}},[s._v("#")]),s._v(" 访问 Nginx")]),s._v(" "),n("p",[s._v("参考方式一：[访问 Nginx](#访问 Nginx)")]),s._v(" "),n("blockquote",[n("p",[s._v("参考资料：")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://harrylyj.blog.csdn.net/article/details/109580325",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux安装Nginx步骤"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://serverfault.com/questions/715049/what-s-the-difference-between-the-mainline-and-stable-branches-of-nginx",target:"_blank",rel:"noopener noreferrer"}},[s._v('What\'s the difference between the "mainline" and "stable" branches of nginx?'),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/qq_37345604/article/details/90034424",target:"_blank",rel:"noopener noreferrer"}},[s._v("centOS7安装nginx及nginx配置"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/weixin_33725270/article/details/92860407",target:"_blank",rel:"noopener noreferrer"}},[s._v("使用grep精确匹配一个单词"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/u012486840/article/details/52610320",target:"_blank",rel:"noopener noreferrer"}},[s._v("CentOS 7 yum 安装 Nginx"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/kakak2000/article/details/106686220",target:"_blank",rel:"noopener noreferrer"}},[s._v("Centos7设置nginx开机自动启动"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/qq_25508039/article/details/82783953",target:"_blank",rel:"noopener noreferrer"}},[s._v("centos 7下的nginx设置开机自动启动"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);