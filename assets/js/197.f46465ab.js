(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{2004:function(e,t,a){"use strict";a.r(t);var s=a(34),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"git-fatal-unsafe-repository-is-owned-by-someone-else"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-fatal-unsafe-repository-is-owned-by-someone-else"}},[e._v("#")]),e._v(" Git fatal: unsafe repository is owned by someone else")]),e._v(" "),a("h2",{attrs:{id:"错误日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误日志"}},[e._v("#")]),e._v(" 错误日志")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("To add an exception for this directory, call:\n\n\tgit config --global --add safe.directory F:/xxx\nGit failed with a fatal error.\nfatal: unsafe repository ('F:/xxx' is owned by someone else)\nTo add an exception for this directory, call:\n\n\tgit config --global --add safe.directory F:/xxx\n")])])]),a("h2",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[e._v("#")]),e._v(" 解决方案")]),e._v(" "),a("p",[e._v("1、执行 git 命令，在 git 中把这个仓库设置为安全的仓库。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git config --global --add safe.directory F:/xxx\n")])])]),a("blockquote",[a("p",[e._v("这个方法虽然可以解决问题，但是如果仓库很多，一个个加也不是个办法，太麻烦了。这个时候可以用方法2")])]),e._v(" "),a("p",[e._v("2、从 Git v2.35.3 开始，可以使用 * 来表示所有仓库都是安全的。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git config --global --add safe.directory '*'\n")])])]),a("blockquote",[a("p",[e._v("这个命令会在当前用户的 "),a("code",[e._v(".gitconfig")]),e._v(" 文件下添加")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[safe]\n    directory = *\n")])])])]),e._v(" "),a("h2",{attrs:{id:"原因分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因分析"}},[e._v("#")]),e._v(" 原因分析")]),e._v(" "),a("p",[e._v("现在常用的操作系统都是多用户的，如果一个本地 git 仓库可以被多个用户共享，就会非常不安全，比如可能可以被其他人恶意提交、修改项目的东西等。")]),e._v(" "),a("p",[e._v("当我们项目的文件夹权限属于所有人，或者没有文件夹权限（为了方便，我们可能会把项目放到可移动设备 U 盘中）时就会触发这个 git 的警告。")]),e._v(" "),a("blockquote",[a("p",[e._v("补充：")]),e._v(" "),a("p",[e._v("这个跟 windows 系统下的 git 的一个漏洞有关，在根目录下创建 "),a("code",[e._v("C:\\.git\\config")]),e._v("，会导致 git 读取根目录下的配置文件，如果攻击者使用此方式写入可执行命令，则 git 会执行。")]),e._v(" "),a("p",[e._v("解决方法是升级到最新的 Git 版本："),a("a",{attrs:{href:"https://github.com/git-for-windows/git/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/git-for-windows/git/releases"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("在命令行提示符中执行："),a("code",[e._v("git --version")]),e._v(" 查看当前版本号")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("C:\\Users\\pc>git --version\ngit version 2.34.1.windows.1\n")])])]),a("p",[e._v("只要版本号在 2.30.3 以后的，都会强制出现这个提示！")]),e._v(" "),a("p",[e._v("GitHub 仓库上可以看到具体哪次提交做了这个变更："),a("a",{attrs:{href:"https://github.com/git/git/commit/8959555cee7ec045958f9b6dd62e541affb7e7d9",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/git/git/commit/8959555cee7ec045958f9b6dd62e541affb7e7d9"),a("OutboundLink")],1)])]),e._v(" "),a("blockquote",[a("p",[e._v("参考资料：")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.blog/2022-04-12-git-security-vulnerability-announced/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Git security vulnerability announced"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://stackoverflow.com/questions/72008301/error-updating-changes-unsafe-repository-is-owned-by-someone-else",target:"_blank",rel:"noopener noreferrer"}},[e._v("git - Error updating changes_ unsafe repository ... is owned by someone else - Stack Overflow.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);