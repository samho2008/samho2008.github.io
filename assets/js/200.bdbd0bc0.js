(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{2015:function(t,e,a){"use strict";a.r(e);var r=a(34),i=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"gitlab-上传图片失败"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-上传图片失败"}},[t._v("#")]),t._v(" GitLab 上传图片失败")]),t._v(" "),a("h2",{attrs:{id:"日志查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志查看"}},[t._v("#")]),t._v(" 日志查看")]),t._v(" "),a("p",[t._v("安装好 GitLab 之后上传图片报错，查看日志发现问题：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('==> /var/log/gitlab/gitlab-workhorse/current <==\n{"correlation_id":"LaEfEQROIE7","filename":"wechat.jpg","level":"info","msg":"running exiftool to remove any metadata","time":"2022-06-20T05:10:14+08:00"}\n{"correlation_id":"LaEfEQROIE7","error":"handleFileUploads: extract files from multipart: failed to start EXIF metadata cleaner: start [exiftool -all= --IPTC:all --XMP-iptcExt:all -tagsFromFile @ -ResolutionUnit -XResolution -YResolution -YCbCrSubSampling -YCbCrPositioning -BitsPerSample -ImageHeight -ImageWidth -ImageSize -Copyright -CopyrightNotice -Orientation -]: fork/exec /opt/gitlab/embedded/bin/exiftool: no such file or directory","level":"error","method":"POST","msg":"error","time":"2022-06-20T05:10:14+08:00","uri":"/admin/appearance"}\n{"correlation_id":"LaEfEQROIE7","duration_ms":1,"host":"gitlab.yuanke.com","level":"info","method":"POST","msg":"access","proto":"HTTP/1.1","referrer":"http://gitlab.yuanke.com/admin/appearance","remote_addr":"127.0.0.1:0","remote_ip":"127.0.0.1","status":500,"system":"http","time":"2022-06-20T05:10:14+08:00","uri":"/admin/appearance","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36","written_bytes":2926}\n{"correlation_id":"lZArmH6EsVa","duration_ms":116,"host":"gitlab.yuanke.com","level":"info","method":"GET","msg":"access","proto":"HTTP/1.1","referrer":"http://gitlab.yuanke.com/admin/appearance","remote_addr":"127.0.0.1:0","remote_ip":"127.0.0.1","status":301,"system":"http","time":"2022-06-20T05:10:14+08:00","uri":"/favicon.ico","user_agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36","written_bytes":174}\n\n')])])]),a("h2",{attrs:{id:"日志分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日志分析"}},[t._v("#")]),t._v(" 日志分析")]),t._v(" "),a("p",[t._v("看到错误，定位到问题，初步判断是缺少依赖：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"error":"handleFileUploads: extract files from multipart: failed to start EXIF metadata cleaner: start [exiftool -all= --IPTC:all --XMP-iptcExt:all -tagsFromFile @ -ResolutionUnit -XResolution -YResolution -YCbCrSubSampling -YCbCrPositioning -BitsPerSample -ImageHeight -ImageWidth -ImageSize -Copyright -CopyrightNotice -Orientation -]: fork/exec /opt/gitlab/embedded/bin/exiftool: no such file or directory"\n')])])]),a("h2",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),a("p",[t._v("安装 perl，再次上传，问题解决。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" perl\n")])])]),a("blockquote",[a("p",[t._v("参考文献：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://gitlab.com/gitlab-org/gitlab/-/issues/28215",target:"_blank",rel:"noopener noreferrer"}},[t._v("Internal server error 500 at issue image upload (#28215) · Issues · GitLab.org _ GitLab · GitLab"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=i.exports}}]);