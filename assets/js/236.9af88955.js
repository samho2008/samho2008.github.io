(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{2103:function(s,a,t){"use strict";t.r(a);var e=t(34),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"linux-sed-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-sed-命令"}},[s._v("#")]),s._v(" Linux Sed 命令")]),s._v(" "),t("h2",{attrs:{id:"在某行的前一行或后一行添加内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在某行的前一行或后一行添加内容"}},[s._v("#")]),s._v(" 在某行的前一行或后一行添加内容")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#匹配行前加")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/allow 361way.com/iallow www.361way.com'")]),s._v(" the.conf.file\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#匹配行前后")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/allow 361way.com/aallow www.361way.com'")]),s._v(" the.conf.file\n")])])]),t("p",[s._v("而在书写的时候为便与区分，往往会在i和a前面加一个反加一个反斜扛 。代码就变成了：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/2222222222/a\\3333333333'")]),s._v(" test.txt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/2222222222/i\\3333333333'")]),s._v(" test.txt\n")])])]),t("p",[s._v("这就就可以很方便的看出要在某一行前或某一行后加入什么内容 。不过经常我记不住a 、i 那个是前那个是后。我的记法是a = after ，i = in front 。这样就知道 i 是前，a 是后了。不过官方的man文件里不是这样解释的，man文件里是这样解释的：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("a\ntext   Append text, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" has each embedded newline preceded by a backslash.\ni\ntext   Insert text, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" has each embedded newline preceded by a backslash.\n")])])]),t("p",[s._v("而且其可以配合find查找的内容处理，如下：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -name server.xml"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/directory/i       \x3c!--'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -name server.xml"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/pattern=\"%h/a       --\x3e'")]),s._v("\n")])])]),t("h2",{attrs:{id:"在某行-指具体行号-前或后加一行内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在某行-指具体行号-前或后加一行内容"}},[s._v("#")]),s._v(" 在某行（指具体行号）前或后加一行内容")]),s._v(" "),t("p",[s._v("这里指定的行号是第四行 。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'N;4addpdf'")]),s._v(" a.txt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'N;4ieepdf'")]),s._v(" a.txt \n")])])]),t("h2",{attrs:{id:"删除指定行的上一行或下一行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除指定行的上一行或下一行"}},[s._v("#")]),s._v(" 删除指定行的上一行或下一行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定文件的上一行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i -e :a -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$!N;s/.*n(.*directory)/1/;ta'")]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'P;D'")]),s._v(" server.xml\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定文件的下一行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/pattern=\"%/{n;d}'")]),s._v(" server.xml \n")])])]),t("p",[s._v("这个写起来有点长，一般如果不是shell里的需要，我更喜欢用vim去处理。另外需要注意的是，在vim里如果替换的内容里tab这样的符号是需要在编辑模式下分别按ctrl+v 和crtl+I ，而不是不停的几个空格")]),s._v(" "),t("blockquote",[t("p",[s._v("参考资料：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/u011304615/article/details/71450847",target:"_blank",rel:"noopener noreferrer"}},[s._v("sed 匹配内容的前一行和后一行　添加内容"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);