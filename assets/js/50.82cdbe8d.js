(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{2037:function(t,a,s){"use strict";s.r(a);var r=s(34),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"安装-frp-内网穿透客户端和服务端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#安装-frp-内网穿透客户端和服务端"}},[t._v("#")]),t._v(" 安装 frp 内网穿透客户端和服务端")]),t._v(" "),r("p",[t._v("需求分析：")]),t._v(" "),r("p",[t._v("目前有一台电脑在家里，一台电脑在公司，怎么用家里的电脑连接公司的电脑呢？")]),t._v(" "),r("p",[t._v("需要有一台公网的服务器作为中转，由这台公网服务器转发请求（服务端）。")]),t._v(" "),r("h2",{attrs:{id:"_1-部署-frp-服务端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-部署-frp-服务端"}},[t._v("#")]),t._v(" 1. 部署 frp 服务端")]),t._v(" "),r("h3",{attrs:{id:"_1-1-下载-frp-服务端部署文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下载-frp-服务端部署文件"}},[t._v("#")]),t._v(" 1.1 下载 frp 服务端部署文件")]),t._v(" "),r("p",[t._v("打开 frp 下载网站："),r("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/fatedier/frp/releases"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("在 Assets 中下载")]),t._v(" "),r("p",[t._v("由于 frp 的服务端部署在 Linux 服务器上，所以选择 linux，而且是 64 位的操作系统，所以选择 amd64。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(906),alt:"image-20220519051310243"}})]),t._v(" "),r("h3",{attrs:{id:"_1-2-上传和解压-frp-服务端部署文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-上传和解压-frp-服务端部署文件"}},[t._v("#")]),t._v(" 1.2 上传和解压 frp 服务端部署文件")]),t._v(" "),r("p",[t._v("上传 "),r("code",[t._v(".tar.gz")]),t._v(" 结尾的压缩包至目录 "),r("code",[t._v("/usr/local")]),t._v("。")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf frp_0.42.0_linux_amd64.tar.gz\n")])])]),r("h3",{attrs:{id:"_1-3-修改-frp-服务端配置文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-修改-frp-服务端配置文件"}},[t._v("#")]),t._v(" 1.3 修改 frp 服务端配置文件")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" frp_0.42.0_linux_amd64\n")])])]),r("p",[t._v("修改里面的 "),r("code",[t._v("frps.ini")])]),t._v(" "),r("div",{staticClass:"language-ini extra-class"},[r("pre",{pre:!0,attrs:{class:"language-ini"}},[r("code",[r("span",{pre:!0,attrs:{class:"token section"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行 frp 服务的对外端口，给客户端连接用")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_port")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("50000")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frp 操作面板网站端口，用于显示连接状态以及代理统计信息展示")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dashboard_port")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("50002")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 访问操作面板的用户名")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dashboard_user")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("admin")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 访问操作面板的密码")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dashboard_pwd")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("admin123456")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志文件保存位置")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log_file")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("./frps.log")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 记录的日志级别")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log_level")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志留存天数")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log_max_days")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 超时时间")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("authentication_timeout")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 最大链接池，每个代理预先与后端服务器建立起指定数量的最大链接数")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("max_pool_count")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("50")]),t._v("\n\n")])])]),r("h3",{attrs:{id:"_1-4-运行-frp-服务端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-运行-frp-服务端"}},[t._v("#")]),t._v(" 1.4 运行 frp 服务端")]),t._v(" "),r("p",[t._v("使用 frps.ini 配置文件启动 frps，并且在后台运行这个服务。")]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" ./frps -c ./frps.ini "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),r("h3",{attrs:{id:"_1-5-访问-frp-服务端页面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-访问-frp-服务端页面"}},[t._v("#")]),t._v(" 1.5 访问 frp 服务端页面")]),t._v(" "),r("p",[t._v("50002 是 dashboard_port")]),t._v(" "),r("p",[t._v("http://ip:50002")]),t._v(" "),r("p",[t._v("访问后会要求输入用户名和密码，即 dashboard_user 和 dashboard_pwd")]),t._v(" "),r("p",[t._v("访问之后看到这个界面就离成功不远啦~")]),t._v(" "),r("p",[r("img",{attrs:{src:s(907),alt:"image-20220519053016180"}})]),t._v(" "),r("h3",{attrs:{id:"_1-6-防火墙放行服务端端口"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-防火墙放行服务端端口"}},[t._v("#")]),t._v(" 1.6 防火墙放行服务端端口")]),t._v(" "),r("p",[t._v("bind_port = 50000")]),t._v(" "),r("p",[t._v("dashboard_port = 50002")]),t._v(" "),r("p",[t._v("防火墙放行 50000 和 50002 端口。")]),t._v(" "),r("h2",{attrs:{id:"_2-部署-frp-客户端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署-frp-客户端"}},[t._v("#")]),t._v(" 2. 部署 frp 客户端")]),t._v(" "),r("h3",{attrs:{id:"_2-1-下载-frp-客户端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-下载-frp-客户端"}},[t._v("#")]),t._v(" 2.1 下载 frp 客户端")]),t._v(" "),r("p",[t._v("打开 frp 下载网站："),r("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/fatedier/frp/releases"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("在 Assets 中下载")]),t._v(" "),r("p",[t._v("Windows 64 位操作系统，下载 _windows_amd64")]),t._v(" "),r("p",[r("img",{attrs:{src:s(908),alt:"image-20220519053140238"}})]),t._v(" "),r("h3",{attrs:{id:"_2-2-解压-frp-客户端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-解压-frp-客户端"}},[t._v("#")]),t._v(" 2.2 解压 frp 客户端")]),t._v(" "),r("p",[t._v("下载下来的是 zip 的，解压出来就可以了。")]),t._v(" "),r("h3",{attrs:{id:"_2-3-修改-frp-客户端配置文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-修改-frp-客户端配置文件"}},[t._v("#")]),t._v(" 2.3 修改 frp 客户端配置文件")]),t._v(" "),r("p",[t._v("修改 "),r("code",[t._v("frpc.ini")])]),t._v(" "),r("div",{staticClass:"language-ini extra-class"},[r("pre",{pre:!0,attrs:{class:"language-ini"}},[r("code",[r("span",{pre:!0,attrs:{class:"token section"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务端公网 IP 地址")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("105.88.15.18")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对应服务端的 bind_port")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("50000")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token section"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("rdp")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 连接类型")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("tcp")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本机 IP，使用默认的 127.0.0.1 即可")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_ip")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地端口，使用默认的 3389 即可")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3389")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 远程端口，使用 frp 服务器上的哪个端口作为中转，由管理员统一为每个客户端分配指定的端口")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("remote_port")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("50010")]),t._v("\n\n")])])]),r("h3",{attrs:{id:"_2-4-启动-frp-客户端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-启动-frp-客户端"}},[t._v("#")]),t._v(" 2.4 启动 frp 客户端")]),t._v(" "),r("p",[t._v("运行 "),r("code",[t._v("run.bat")]),t._v("，里面的脚本内容：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("frpc.exe -c frpc.ini\n")])])]),r("h3",{attrs:{id:"_2-5-防火墙放行-frp-客户端端口"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-防火墙放行-frp-客户端端口"}},[t._v("#")]),t._v(" 2.5 防火墙放行 frp 客户端端口")]),t._v(" "),r("p",[t._v("remote_port = 50010")]),t._v(" "),r("p",[t._v("放行 50010 端口。")]),t._v(" "),r("h2",{attrs:{id:"_3-远程连接-frp-客户端"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-远程连接-frp-客户端"}},[t._v("#")]),t._v(" 3. 远程连接 frp 客户端")]),t._v(" "),r("h3",{attrs:{id:"_3-1-打开远程连接工具"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-打开远程连接工具"}},[t._v("#")]),t._v(" 3.1 打开远程连接工具")]),t._v(" "),r("p",[t._v("Windows 系统自带远程桌面连接工具，可以用这个连接 frp 客户端。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(909),alt:"image-20220519054129757"}})]),t._v(" "),r("h3",{attrs:{id:"_3-2-输入-frp-客户端计算机名"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-输入-frp-客户端计算机名"}},[t._v("#")]),t._v(" 3.2 输入 frp 客户端计算机名")]),t._v(" "),r("p",[t._v("打开远程连接工具后，会要求输入计算机名。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(910),alt:"image-20220519055141075"}})]),t._v(" "),r("p",[t._v("计算机名格式为：公网服务器 IP 地址:frp 客户端端口号")]),t._v(" "),r("p",[t._v("比如，")]),t._v(" "),r("p",[t._v("公网服务器 IP 地址为：105.88.15.18")]),t._v(" "),r("p",[t._v("frp 客户端端口号：50010")]),t._v(" "),r("p",[t._v("则输入计算机名：105.88.15.18:50010")]),t._v(" "),r("p",[t._v("登录之后，要求输入用户名和密码，注意，这里是被连接 Windows 系统主机上设置的用户名和密码！！")]),t._v(" "),r("p",[r("img",{attrs:{src:s(911),alt:"image-20220519054637433"}})]),t._v(" "),r("blockquote",[r("p",[t._v("查看用户名的方法：")]),t._v(" "),r("p",[t._v("在 frp 客户端机器上打开命令提示符。")]),t._v(" "),r("p",[t._v("默认情况下，所在的目录为当前登录用户的目录。")]),t._v(" "),r("p",[t._v("如图所示，msi 即为该电脑的用户名。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(912),alt:"image-20220519054752884"}})])]),t._v(" "),r("h3",{attrs:{id:"_3-3-在-frp-服务端面板上查看连接"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-在-frp-服务端面板上查看连接"}},[t._v("#")]),t._v(" 3.3 在 frp 服务端面板上查看连接")]),t._v(" "),r("p",[t._v("打开 Proxies，TCP，可以看到刚才的 frp 客户端出现在了这里。")]),t._v(" "),r("p",[r("img",{attrs:{src:s(913),alt:"image-20220519055432148"}})]),t._v(" "),r("h2",{attrs:{id:"faq"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),r("p",[t._v("1、无法连接？")]),t._v(" "),r("p",[t._v("检查端口是否放行、配置是否正确。")]),t._v(" "),r("h2",{attrs:{id:"写在最后"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#写在最后"}},[t._v("#")]),t._v(" 写在最后")]),t._v(" "),r("p",[t._v("虽然现在有了很多远程连接工具（Teamviewer、ToDesk、向日葵等），但是那些画质跟直接用 Windows 系统自带的远程连接工具的完全不在一个级别上。如果有了 frp 再配上好的服务器以及大的带宽，和在自己电脑操作上没什么两样了。")]),t._v(" "),r("blockquote",[r("p",[t._v("参考资料：")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://blog.csdn.net/weixin_43922901/article/details/109261700",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用frp配置内网访问（穿透）教程（超详细，简单）"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://www.jianshu.com/p/6be158cc3685",target:"_blank",rel:"noopener noreferrer"}},[t._v("frp搭建与使用详细教程"),r("OutboundLink")],1)]),t._v(" "),r("p",[r("a",{attrs:{href:"https://blog.csdn.net/u013144287/article/details/78589643",target:"_blank",rel:"noopener noreferrer"}},[t._v("十分钟教你配置frp实现内网穿透"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports},906:function(t,a,s){t.exports=s.p+"assets/img/image-20220519051310243.406da1a5.png"},907:function(t,a,s){t.exports=s.p+"assets/img/image-20220519053016180.a2740300.png"},908:function(t,a,s){t.exports=s.p+"assets/img/image-20220519053140238.5e53a897.png"},909:function(t,a,s){t.exports=s.p+"assets/img/image-20220519054129757.eb2f2d62.png"},910:function(t,a,s){t.exports=s.p+"assets/img/image-20220519055141075.a3897c1a.png"},911:function(t,a,s){t.exports=s.p+"assets/img/image-20220519054637433.86d10235.png"},912:function(t,a,s){t.exports=s.p+"assets/img/image-20220519054752884.96d13c80.png"},913:function(t,a,s){t.exports=s.p+"assets/img/image-20220519055432148.038c85f7.png"}}]);